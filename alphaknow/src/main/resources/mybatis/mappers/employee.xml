<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.employee">

	<resultMap id="employeeResultMap" type="employeeDTO">
	    <id property="employeeKey" column="EMPLOYEE_KEY"/>
	    <result property="employeeName" column="EMPLOYEE_NAME"/>
	    <result property="employeePhone" column="EMPLOYEE_PHONE"/>
	    <result property="employeeDate" column="EMPLOYEE_DATE"/>
	    <result property="jobGrade" column="JOB_GRADE"/>
	    <result property="employeeId" column="EMPLOYEE_ID"/>
	    <result property="employeePw" column="EMPLOYEE_PW"/>
	    <result property="employmentStatus" column="EMPLOYEEMENT_STATUS"/>
	    <result property="departmentName" column="DEPARTMENT_NAME"/>
	</resultMap>

	<select id="employeeSelect" resultMap="employeeResultMap">
		SELECT 
			EMPLOYEE_KEY, 
			EMPLOYEE_NAME,
			EMPLOYEE_PHONE,
			EMPLOYEE_DATE, 
			JOB_GRADE,
			EMPLOYEE_ID,
			EMPLOYEE_PW,
			EMPLOYEEMENT_STATUS,
			DEPARTMENT_NAME
    	FROM 
    		EMPLOYEE
	</select>
	
	<insert id="employeeInsert" parameterType="employeeDTO">
	    INSERT INTO ALPHAKNOW.EMPLOYEE(
	    	EMPLOYEE_KEY,
	    	EMPLOYEE_NAME,
	    	EMPLOYEE_PHONE,
	    	EMPLOYEE_DATE,
	    	JOB_GRADE,
	    	EMPLOYEE_ID,
	    	EMPLOYEE_PW,
	    	EMPLOYEEMENT_STATUS,
	    	DEPARTMENT_NAME
	    )
		VALUES(
			employee_seq.NEXTVAL,
			#{employeeName},
			#{employeePhone},
			TO_CHAR(SYSDATE, 'YYYY-MM-DD'),
			'사원',
			#{employeeId},
			#{employeePw},
			'재직',
			#{departmentName}
		)	
	</insert>
	
<!-- 	<update id="employeeUpdate" parameterType="employeeDTO"> -->
<!-- 	    UPDATE production_plan_temp -->
<!-- 	    SET -->
<!-- 	        item_code = #{itemCode}, -->
<!-- 	        item_name = #{itemName}, -->
<!-- 	        delivery_place = #{deliveryPlace}, -->
<!-- 	        delivery_amount = #{deliveryAmount}, -->
<!-- 	        expected_production_amount = #{productionAmount}, -->
<!-- 	        expected_remain_amount = #{remainAmount}, -->
<!-- 	        expected_start_date = #{startdate}, -->
<!-- 	        expected_end_date = #{enddate} -->
<!-- 	    WHERE -->
<!-- 	        production_plan_code = #{ppc} -->
<!-- 	</update> -->
	
<!-- 	<delete id="employeeDelete" parameterType="String"> -->
<!-- 		DELETE FROM production_plan_temp -->
<!-- 	    WHERE production_plan_code = #{ppc} -->
<!-- 	</delete> -->

	
	<!-- 아작스 -->
	<!-- 사원 세부정보 열람 -->
	<select id="employeeAjax" parameterType="employeeDTO" resultMap="employeeResultMap">
		SELECT 
			EMPLOYEE_KEY, 
			EMPLOYEE_NAME,
			EMPLOYEE_PHONE,
			EMPLOYEE_DATE, 
			JOB_GRADE,
			EMPLOYEE_ID,
			EMPLOYEE_PW,
			EMPLOYEEMENT_STATUS,
			DEPARTMENT_NAME
    	FROM 
    		EMPLOYEE
    	WHERE
    		EMPLOYEE_KEY = #{employeeKey}
	</select>
	
	<!-- 사원 수정 -->
	<update id="employeeAjaxUpdate" parameterType="employeeDTO">
    UPDATE 
    	ALPHAKNOW.EMPLOYEE
    SET
        EMPLOYEE_NAME = #{employeeName},
        EMPLOYEE_PHONE = #{employeePhone},
        JOB_GRADE = #{jobGrade},
        EMPLOYEE_ID = #{employeeId},
        EMPLOYEE_PW = #{employeePw},
        EMPLOYEEMENT_STATUS = #{employmentStatus},
        DEPARTMENT_NAME = #{departmentName}
    WHERE 
    	EMPLOYEE_KEY = #{employeeKey}
</update>

</mapper>